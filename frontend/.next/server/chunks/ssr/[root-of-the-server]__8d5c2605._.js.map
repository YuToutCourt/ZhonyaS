{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/wapzi/Desktop/Programmation/JavaScript/ZhonyaS-js/frontend/src/contexts/ThemeContext.tsx"],"sourcesContent":["'use client'\r\n\r\nimport React, { createContext, useContext, useEffect, useState } from 'react'\r\n\r\ntype Theme = 'light' | 'dark'\r\n\r\ninterface ThemeContextType {\r\n  theme: Theme\r\n  toggleTheme: () => void\r\n}\r\n\r\nconst ThemeContext = createContext<ThemeContextType | undefined>(undefined)\r\n\r\nexport function ThemeProvider({ children }: { children: React.ReactNode }) {\r\n  const [theme, setTheme] = useState<Theme>('light')\r\n\r\n  useEffect(() => {\r\n    // Vérifier le thème sauvegardé ou la préférence système\r\n    const savedTheme = localStorage.getItem('theme') as Theme\r\n    const systemTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'\r\n    setTheme(savedTheme || systemTheme)\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    // Sauvegarder le thème et appliquer les classes\r\n    localStorage.setItem('theme', theme)\r\n    document.documentElement.classList.remove('light', 'dark')\r\n    document.documentElement.classList.add(theme)\r\n  }, [theme])\r\n\r\n  const toggleTheme = () => {\r\n    setTheme(prev => prev === 'light' ? 'dark' : 'light')\r\n  }\r\n\r\n  return (\r\n    <ThemeContext.Provider value={{ theme, toggleTheme }}>\r\n      {children}\r\n    </ThemeContext.Provider>\r\n  )\r\n}\r\n\r\nexport function useTheme() {\r\n  const context = useContext(ThemeContext)\r\n  if (context === undefined) {\r\n    throw new Error('useTheme must be used within a ThemeProvider')\r\n  }\r\n  return context\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAEA;AAFA;;;AAWA,MAAM,6BAAe,IAAA,mPAAa,EAA+B;AAE1D,SAAS,cAAc,EAAE,QAAQ,EAAiC;IACvE,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,8OAAQ,EAAQ;IAE1C,IAAA,+OAAS,EAAC;QACR,wDAAwD;QACxD,MAAM,aAAa,aAAa,OAAO,CAAC;QACxC,MAAM,cAAc,OAAO,UAAU,CAAC,gCAAgC,OAAO,GAAG,SAAS;QACzF,SAAS,cAAc;IACzB,GAAG,EAAE;IAEL,IAAA,+OAAS,EAAC;QACR,gDAAgD;QAChD,aAAa,OAAO,CAAC,SAAS;QAC9B,SAAS,eAAe,CAAC,SAAS,CAAC,MAAM,CAAC,SAAS;QACnD,SAAS,eAAe,CAAC,SAAS,CAAC,GAAG,CAAC;IACzC,GAAG;QAAC;KAAM;IAEV,MAAM,cAAc;QAClB,SAAS,CAAA,OAAQ,SAAS,UAAU,SAAS;IAC/C;IAEA,qBACE,2QAAC,aAAa,QAAQ;QAAC,OAAO;YAAE;YAAO;QAAY;kBAChD;;;;;;AAGP;AAEO,SAAS;IACd,MAAM,UAAU,IAAA,gPAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/wapzi/Desktop/Programmation/JavaScript/ZhonyaS-js/frontend/src/contexts/AuthContext.tsx"],"sourcesContent":["'use client'\n\nimport React, { createContext, useContext, useState, useEffect, ReactNode } from 'react'\n\nexport interface User {\n  id: number\n  username: string\n  email?: string\n  created_at?: string\n  last_login?: string\n}\n\nexport interface AuthContextType {\n  user: User | null\n  token: string | null\n  isLoading: boolean\n  login: (username: string, password: string) => Promise<{ success: boolean; error?: string }>\n  register: (username: string, password: string, email?: string) => Promise<{ success: boolean; error?: string }>\n  logout: () => void\n  forgotPassword: (email: string) => Promise<{ success: boolean; error?: string }>\n  resetPassword: (token: string, newPassword: string) => Promise<{ success: boolean; error?: string }>\n  syncAuth: () => Promise<void>\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined)\n\nexport const useAuth = () => {\n  const context = useContext(AuthContext)\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider')\n  }\n  return context\n}\n\ninterface AuthProviderProps {\n  children: ReactNode\n}\n\nconst API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5001'\n\nexport const AuthProvider: React.FC<AuthProviderProps> = ({ children }) => {\n  const [user, setUser] = useState<User | null>(null)\n  const [token, setToken] = useState<string | null>(null)\n  const [isLoading, setIsLoading] = useState(true)\n\n  // Vérifier si l'utilisateur est connecté au chargement\n  useEffect(() => {\n    const checkAuth = async () => {\n      // Attendre un peu pour s'assurer que le localStorage est disponible\n      await new Promise(resolve => setTimeout(resolve, 100))\n      \n      const storedToken = localStorage.getItem('access_token')\n      \n      if (storedToken) {\n        setToken(storedToken)\n        await fetchCurrentUser(storedToken)\n      } else {\n        setIsLoading(false)\n      }\n    }\n    \n    checkAuth()\n  }, [])\n\n  const fetchCurrentUser = async (authToken: string) => {\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/auth/me`, {\n        headers: {\n          'Authorization': `Bearer ${authToken}`,\n          'Content-Type': 'application/json',\n        },\n      })\n\n      if (response.ok) {\n        const data = await response.json()\n        setUser(data.user)\n      } else {\n        // Token invalide, le supprimer\n        localStorage.removeItem('access_token')\n        setToken(null)\n      }\n    } catch (error) {\n      console.error('Error fetching current user:', error)\n      localStorage.removeItem('access_token')\n      setToken(null)\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  const login = async (username: string, password: string): Promise<{ success: boolean; error?: string }> => {\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/auth/login`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ username, password }),\n      })\n\n      const data = await response.json()\n\n      if (response.ok) {\n        setToken(data.access_token)\n        setUser(data.user)\n        localStorage.setItem('access_token', data.access_token)\n        \n        return { success: true }\n      } else {\n        return { success: false, error: data.error || 'Erreur de connexion' }\n      }\n    } catch (error) {\n      console.error('Login error:', error)\n      return { success: false, error: 'Erreur de connexion au serveur' }\n    }\n  }\n\n  const register = async (username: string, password: string, email?: string): Promise<{ success: boolean; error?: string }> => {\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/auth/register`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ username, password, email }),\n      })\n\n      const data = await response.json()\n\n      if (response.ok) {\n        return { success: true }\n      } else {\n        return { success: false, error: data.error || 'Erreur lors de l\\'inscription' }\n      }\n    } catch (error) {\n      return { success: false, error: 'Erreur de connexion au serveur' }\n    }\n  }\n\n  const logout = () => {\n    setUser(null)\n    setToken(null)\n    localStorage.removeItem('access_token')\n  }\n\n  const forgotPassword = async (email: string): Promise<{ success: boolean; error?: string }> => {\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/auth/forgot-password`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ email }),\n      })\n\n      const data = await response.json()\n\n      if (response.ok) {\n        return { success: true }\n      } else {\n        return { success: false, error: data.error || 'Erreur lors de l\\'envoi de l\\'email' }\n      }\n    } catch (error) {\n      return { success: false, error: 'Erreur de connexion au serveur' }\n    }\n  }\n\n  const resetPassword = async (token: string, newPassword: string): Promise<{ success: boolean; error?: string }> => {\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/auth/reset-password`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ token, new_password: newPassword }),\n      })\n\n      const data = await response.json()\n\n      if (response.ok) {\n        return { success: true }\n      } else {\n        return { success: false, error: data.error || 'Erreur lors de la réinitialisation' }\n      }\n    } catch (error) {\n      return { success: false, error: 'Erreur de connexion au serveur' }\n    }\n  }\n\n  const syncAuth = async (): Promise<void> => {\n    const storedToken = localStorage.getItem('access_token')\n    \n    if (storedToken) {\n      setToken(storedToken)\n      await fetchCurrentUser(storedToken)\n    } else {\n      setToken(null)\n      setUser(null)\n      setIsLoading(false)\n    }\n  }\n\n  const value: AuthContextType = {\n    user,\n    token,\n    isLoading,\n    login,\n    register,\n    logout,\n    forgotPassword,\n    resetPassword,\n    syncAuth,\n  }\n\n  return (\n    <AuthContext.Provider value={value}>\n      {children}\n    </AuthContext.Provider>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 291, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/wapzi/Desktop/Programmation/JavaScript/ZhonyaS-js/frontend/src/components/auth/AuthSync.tsx"],"sourcesContent":["'use client'\n\nimport React, { useEffect } from 'react'\nimport { useAuth } from '@/contexts/AuthContext'\n\nexport const AuthSync: React.FC = () => {\n  const { user, token, isLoading, syncAuth } = useAuth()\n\n  useEffect(() => {\n    // Vérifier si on a un token dans le localStorage mais pas dans l'état\n    const checkAndSync = async () => {\n      const storedToken = localStorage.getItem('access_token')\n      \n      if (storedToken && !token && !isLoading) {\n        console.log('AuthSync - Found token in localStorage but not in state, syncing...')\n        await syncAuth()\n      }\n    }\n\n    // Attendre un peu pour s'assurer que le contexte est initialisé\n    const timeoutId = setTimeout(checkAndSync, 200)\n    \n    return () => clearTimeout(timeoutId)\n  }, [token, user, isLoading, syncAuth])\n\n  return null\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;AAKO,MAAM,WAAqB;IAChC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,IAAA,uKAAO;IAEpD,IAAA,+OAAS,EAAC;QACR,sEAAsE;QACtE,MAAM,eAAe;YACnB,MAAM,cAAc,aAAa,OAAO,CAAC;YAEzC,IAAI,eAAe,CAAC,SAAS,CAAC,WAAW;gBACvC,QAAQ,GAAG,CAAC;gBACZ,MAAM;YACR;QACF;QAEA,gEAAgE;QAChE,MAAM,YAAY,WAAW,cAAc;QAE3C,OAAO,IAAM,aAAa;IAC5B,GAAG;QAAC;QAAO;QAAM;QAAW;KAAS;IAErC,OAAO;AACT","debugId":null}},
    {"offset": {"line": 326, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/wapzi/Desktop/Programmation/JavaScript/ZhonyaS-js/frontend/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACL,IAAIF,QAAQC,GAAG,CAACK,yBAAyB,EAAE;;SAcpC;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;QAGT,OAAO;;IAOT;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 345, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/wapzi/Desktop/Programmation/JavaScript/ZhonyaS-js/frontend/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,gJACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 350, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/wapzi/Desktop/Programmation/JavaScript/ZhonyaS-js/frontend/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n"],"names":["module","exports","require","vendored","React"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,gJACRC,QAAQ,CAAC,YAAY,CAAEC,KAAK","ignoreList":[0],"debugId":null}}]
}